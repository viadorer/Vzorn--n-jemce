<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vzorn√Ω n√°jemce ‚Äì Kalkulaƒçka bonity</title>
    <!-- Tailwind for styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Brand font to match index -->
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Project CSS -->
    <link rel="stylesheet" href="css/cookies.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Plus Jakarta Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', Arial, sans-serif;
            background: linear-gradient(to bottom, #ffffff 0%, #eff6ff 100%); /* from white to blue-50 */
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(13, 40, 242, 0.08);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #eef2ff 0%, #dbeafe 100%); /* indigo-50 to blue-100 */
            color: #0D28F2;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .header p {
            font-size: 1.05em;
            color: #374151;
        }

        .menu-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .menu-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            color: white;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .content {
            padding: 30px;
        }

        .tabs {
            display: flex;
            background: #f1f5f9; /* slate-100 */
            border-radius: 10px;
            margin-bottom: 30px;
            overflow: hidden;
        }

        .tab {
            flex: 1;
            padding: 15px 20px;
            background: #e5e7eb; /* gray-200 */
            border: none;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            border-right: 1px solid #e5e7eb;
        }

        .tab:last-child {
            border-right: none;
        }

        .tab.active {
            background: linear-gradient(135deg, #0D28F2 0%, #4F46E5 100%);
            color: white;
        }

        .tab:hover:not(.active) {
            background: #e2e8f0; /* slate-200 */
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .section {
            background: #f8fafc; /* slate-50 */
            border-radius: 10px;
            padding: 25px;
            margin-bottom: 20px;
        }

        .section h3 {
            color: #0f172a; /* slate-900 */
            margin-bottom: 20px;
            font-size: 1.4em;
            font-weight: 700;
        }

        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            display: flex;
            flex-direction: column;
        }

        .form-group label {
            font-weight: 600;
            color: #334155; /* slate-700 */
            margin-bottom: 8px;
            font-size: 14px;
        }

        .form-group input, .form-group select {
            padding: 12px 15px;
            border: 2px solid #e5e7eb; /* gray-200 */
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .form-group input:focus, .form-group select:focus {
            outline: none;
            border-color: #0D28F2;
            box-shadow: 0 0 0 3px rgba(13, 40, 242, 0.12);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 10px;
        }

        .checkbox-group input[type="checkbox"] {
            width: 20px;
            height: 20px;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .result-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }


        .result-card h4 {
            color: #0f172a; /* slate-900 */
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .result-value {
            font-size: 2em;
            font-weight: bold;
            color: #28a745;
            margin-bottom: 5px;
        }

        .result-value.warning {
            color: #ffc107;
        }

        .result-value.danger {
            color: #dc3545;
        }

        .result-description {
            font-size: 0.9em;
            color: #6c757d;
            line-height: 1.4;
        }

        .bonita-score {
            text-align: center;
            color: white;
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }
        .bonita-score.high {
            background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        }
        .bonita-score.medium {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }
        .bonita-score.low {
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
        }

        .score-number {
            font-size: 4em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .score-text {
            font-size: 1.2em;
            margin-bottom: 15px;
        }

        .recommendations {
            background: #eef2ff; /* indigo-50 */
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #c7d2fe; /* indigo-200 */
        }

        .recommendations h4 {
            color: #0D28F2;
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .recommendation-item {
            background: white;
            border-radius: 10px;
            padding: 14px 16px;
            margin-bottom: 10px;
            border: 1px solid #e5e7eb;
        }

        .risk-factors {
            background: #fffbeb; /* amber-50 */
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid #fde68a; /* amber-300 */
        }

        .risk-factors h4 {
            color: #92400e; /* amber-800 */
            margin-bottom: 15px;
            font-size: 1.3em;
            font-weight: 700;
        }

        .risk-item {
            background: white;
            border-radius: 10px;
            padding: 14px 16px;
            margin-bottom: 10px;
            border: 1px solid #fde68a;
        }

        .calculate-btn {
            background: linear-gradient(135deg, #0D28F2 0%, #4F46E5 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 9999px; /* pill */
            font-size: 16px;
            font-weight: 700;
            cursor: pointer;
            transition: transform 0.2s ease, box-shadow 0.2s ease;
            width: 100%;
            margin-top: 20px;
            box-shadow: 0 10px 20px rgba(13, 40, 242, 0.15);
        }

        .calculate-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 24px rgba(13, 40, 242, 0.25);
        }

        .info-text {
            background: #eff6ff; /* blue-50 */
            border: 1px solid #bfdbfe; /* blue-200 */
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            color: #1e3a8a; /* blue-900 */
            font-size: 14px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .tabs {
                flex-direction: column;
            }

            .form-grid {
                grid-template-columns: 1fr;
            }

            .results-grid {
                grid-template-columns: 1fr;
            }

            .score-number {
                font-size: 3em;
            }
        }

        /* Gate lock state */
        .locked {
            opacity: 0.4;
            pointer-events: none;
            user-select: none;
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-400 to-purple-600 min-h-screen p-5">
    <!-- Top bar with unlock button -->
    <div class="max-w-6xl mx-auto mb-4 flex items-center justify-between">
        <a href="index.html" class="inline-flex items-center text-sm font-medium text-gray-800/90 bg-white/70 backdrop-blur px-3 py-1.5 rounded-full shadow hover:bg-white transition">
            <span class="mr-1">‚Üê</span> Hlavn√≠ menu
        </a>
    </div>

    <!-- CTA Modal (branding) -->
    <div id="ctaModal" class="fixed inset-0 z-50 hidden items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50"></div>
        <div class="relative w-full max-w-md bg-white rounded-3xl shadow-2xl p-6 mx-auto">
            <!-- Logo only header (as requested) -->
            <div class="flex items-center justify-center mb-2">
                <img src="images/logo.png" alt="Vzorn√Ω n√°jemce" class="h-8 w-auto" />
            </div>
            <!-- Title & subtitle -->
            <h3 class="text-2xl font-extrabold text-gray-900 text-center">Bezstarostn√Ω pron√°jem na dosah</h3>
            <p class="text-gray-600 text-center mt-1 mb-5">Staƒç√≠ vyplnit formul√°≈ô a my v√°m uk√°≈æeme, jak va≈°i nemovitost pronajmout bezpeƒçnƒõ, v√Ωhodnƒõ a s maxim√°ln√≠ jistotou.</p>

            <!-- Embedded contact widget -->
            <div class="w-full" style="min-height: 480px;">
                <script>
                    (function (w,d,s,o,f,js,fjs) {
                        w['ecm-widget']=o;w[o] = w[o] || function () { (w[o].q = w[o].q || []).push(arguments) };
                        js = d.createElement(s), fjs = d.getElementsByTagName(s)[0];
                        js.id = '24-68ad80a8296783256b609ecdeff8aa3e'; js.dataset.a = 'ptf'; js.src = f; js.async = 1; fjs.parentNode.insertBefore(js, fjs);
                    }(window, document, 'script', 'ecmwidget', 'https://d70shl7vidtft.cloudfront.net/widget.js'));
                </script>
                <div class="bg-white rounded-2xl border border-gray-200 p-5 shadow-sm">
                    <div id="f-24-68ad80a8296783256b609ecdeff8aa3e" class="w-full h-full contact-embed"></div>
                </div>
            </div>
            <style>
                /* Scoped styling for embedded contact forms in CTA modal */
                .contact-embed input,
                .contact-embed textarea,
                .contact-embed select {
                    width: 100% !important;
                    padding: 12px 14px !important;
                    border: 1px solid #e5e7eb !important;
                    border-radius: 12px !important;
                    background-color: #f9fafb !important;
                    color: #111827 !important;
                    font-size: 14px !important;
                    line-height: 1.5 !important;
                    box-shadow: none !important;
                    outline: none !important;
                    transition: border-color .2s ease, box-shadow .2s ease, background-color .2s ease !important;
                }
                .contact-embed input::placeholder,
                .contact-embed textarea::placeholder { color: #9ca3af !important; }
                /* Larger, multi-line message field */
                .contact-embed textarea {
                    min-height: 160px !important;
                    resize: vertical !important;
                    overflow: auto !important;
                    display: block !important;
                    white-space: pre-wrap !important;
                    word-break: break-word !important;
                }
                .contact-embed input:focus,
                .contact-embed textarea:focus,
                .contact-embed select:focus {
                    border-color: #0D28F2 !important;
                    background-color: #ffffff !important;
                    box-shadow: 0 0 0 4px rgba(13, 40, 242, 0.12) !important;
                }
                .contact-embed label { color: #374151 !important; font-weight: 600 !important; margin-bottom: 6px !important; display:block !important; }
                .contact-embed button,
                .contact-embed [type="submit"],
                .contact-embed .btn,
                .contact-embed .button {
                    background-color: #0D28F2 !important;
                    color: #ffffff !important;
                    border-radius: 9999px !important;
                    padding: 12px 18px !important;
                    font-weight: 700 !important;
                    border: none !important;
                    box-shadow: 0 10px 15px -3px rgba(13, 40, 242, 0.25), 0 4px 6px -4px rgba(13, 40, 242, 0.25) !important;
                    transition: transform .15s ease, background-color .2s ease !important;
                }
                .contact-embed button:hover,
                .contact-embed [type="submit"]:hover,
                .contact-embed .btn:hover,
                .contact-embed .button:hover { background-color: rgba(13, 40, 242, 0.9) !important; transform: translateY(-1px) !important; }
                .contact-embed button:active,
                .contact-embed [type="submit"]:active,
                .contact-embed .btn:active,
                .contact-embed .button:active { transform: translateY(0) !important; }
                .contact-embed input,
                .contact-embed textarea,
                .contact-embed select { margin-bottom: 10px !important; }
                .contact-embed .form-group { margin-bottom: 12px !important; }
                .contact-embed small,
                .contact-embed .hint,
                .contact-embed .consent { color: #6b7280 !important; font-size: 12px !important; }
            </style>
        </div>
    </div>

    <script>
      // Handle embedded widget "Zpƒõt na str√°nku" action and reset widget state
      (function() {
        const WIDGET_CONTAINER_ID = 'f-24-68ad80a8296783256b609ecdeff8aa3e';
        const modalEl = document.getElementById('ctaModal');

        function closeCtaModal() {
          if (!modalEl) return;
          modalEl.classList.add('hidden');
          modalEl.classList.remove('flex');
        }

        function resetContactWidget() {
          const old = document.getElementById(WIDGET_CONTAINER_ID);
          if (!old) return;
          const parent = old.parentElement;
          // Remove current widget DOM (thank-you state etc.)
          old.remove();
          // Create fresh container with the same ID and classes
          const fresh = document.createElement('div');
          fresh.id = WIDGET_CONTAINER_ID;
          fresh.className = 'w-full h-full contact-embed';
          parent.appendChild(fresh);
          // If the widget exposes a reinit API, try it
          try { if (typeof window.ecmwidget === 'function') window.ecmwidget('init'); } catch (_) {}
        }

        // Delegate clicks inside the widget to catch the back button
        document.addEventListener('click', function(e) {
          const btn = e.target.closest('.contact-embed button, .contact-embed a');
          if (!btn) return;
          const label = (btn.textContent || '').trim();
          if (label.startsWith('Zpƒõt na str√°nku')) {
            e.preventDefault();
            closeCtaModal();
            // Reset after close so next open shows initial form
            setTimeout(resetContactWidget, 50);
          }
        });
      })();
    </script>

    <!-- Password Gate Modal -->
    <div id="gateModal" class="fixed inset-0 z-50 hidden items-center justify-center px-4">
        <div class="absolute inset-0 bg-black/50"></div>
        <div class="relative w-full max-w-md bg-white rounded-3xl shadow-2xl p-6 mx-auto">
                <div class="flex items-center justify-between mb-4">
                    <div class="flex items-center gap-2">
                        <img src="images/logo.png" alt="Vzorn√Ω n√°jemce" class="h-9 w-auto" />
                        <span class="text-base font-semibold text-gray-900">Vzorn√Ω n√°jemce</span>
                    </div>
                    <button id="closeGateBtn" type="button" aria-label="Zav≈ô√≠t" class="p-2 rounded-full hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-[#0D28F2]">
                        <span class="text-xl leading-none">&times;</span>
                    </button>
                </div>
            <div class="text-gray-700 text-[15px] leading-6 mb-4">
                Provƒõ≈ôte finanƒçn√≠ spolehlivost n√°jemn√≠ka bƒõhem 2 minut. V√Ωsledek berte jako doporuƒçen√≠ ‚Äì <strong>stoprocentn√≠ klid p≈ôin√°≈°√≠ Garantovan√Ω n√°jem</strong>.
            </div>
            <div class="space-y-3">
                <div class="flex items-stretch gap-2 rounded-2xl border border-[#0D28F2]/30 focus-within:ring-2 focus-within:ring-[#0D28F2] p-1.5">
                    <input type="password" id="gatePassword" class="flex-1 border-0 focus:outline-none px-3 py-2 rounded-xl" placeholder="Zadejte heslo" />
                </div>
                <button id="unlockBtn" class="w-full px-4 py-3 rounded-full bg-[#0D28F2] text-white font-semibold hover:bg-[#0D28F2]/90 shadow-lg">Odemknout kalkulaƒçku</button>
                <p id="gateError" class="text-sm text-red-600 hidden"></p>
                <div class="rounded-xl bg-[#0D28F2]/5 text-[#0D28F2] px-3 py-2 text-sm">
                    Tip: nechcete nic ≈ôe≈°it? <a href="#" class="js-open-cta underline font-medium">Zjistƒõte v≈°e o Garantovan√©m n√°jmu</a>
                </div>
            </div>

        </div>
    </div>

    <div id="calculatorContainer" class="container locked">
        <div class="header">
            <img src="images/logo.png" alt="Vzorn√Ω n√°jemce" class="mx-auto mb-2" style="height:40px; width:auto;" />
            <h1>Vzorn√Ω n√°jemce Kalkulaƒçka bonity</h1>
            <p>Komplexn√≠ n√°stroj pro provƒõ≈ôen√≠ platebn√≠ schopnosti a rizikov√©ho profilu potenci√°ln√≠ho n√°jemn√≠ka</p>
        </div>

        <div class="content">
            <!-- Locked notice -->
            <div id="lockedNotice" class="mb-4">
                <div class="rounded-xl border border-yellow-200 bg-yellow-50 text-yellow-800 px-4 py-3 text-sm">
                    <strong>P≈ô√≠stup je uzamƒçen.</strong> Pro v√Ωpoƒçty je pot≈ôeba zadat heslo. 
                    <button id="reopenGate" class="inline-flex items-center gap-1 ml-2 px-2 py-1 rounded-full bg-yellow-600 text-white hover:bg-yellow-700">üîí Odemknout kalkulaƒçku</button>
                </div>
            </div>
            <div class="tabs">
                <button class="tab active" onclick="showTab(event, 'personal')">Osobn√≠ √∫daje</button>
                <button class="tab" onclick="showTab(event, 'income')">P≈ô√≠jmy</button>
                <button class="tab" onclick="showTab(event, 'expenses')">V√Ωdaje & z√°vazky</button>
                <button class="tab" onclick="showTab(event, 'evaluation')">Vyhodnocen√≠</button>
            </div>

            <!-- Osobn√≠ √∫daje -->
            <div id="personal" class="tab-content active">
                <div class="section">
                    <h3>Z√°kladn√≠ informace o n√°jemn√≠ku</h3>
                    <div class="info-text">
                        Zadejte z√°kladn√≠ √∫daje o potenci√°ln√≠m n√°jemn√≠kovi a po≈æadovan√©m n√°jmu. Tyto informace budou pou≈æity pro v√Ωpoƒçet bonity.
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="monthlyRent">Mƒõs√≠ƒçn√≠ n√°jemn√© (Kƒç)</label>
                            <input type="number" id="monthlyRent" placeholder="15000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="age">Vƒõk n√°jemn√≠ka</label>
                            <input type="number" id="age" placeholder="35" min="0" max="120" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="employmentType">Typ zamƒõstn√°n√≠</label>
                            <select id="employmentType" onchange="calculateBonita()">
                                <option value="">Vyberte typ zamƒõstn√°n√≠</option>
                                <option value="employee">Zamƒõstnanec (HPP)</option>
                                <option value="contract">Zamƒõstnanec (DPP/DPƒå)</option>
                                <option value="selfemployed">OSVƒå</option>
                                <option value="pensioner">D≈Øchodce</option>
                                <option value="student">Student</option>
                                <option value="unemployed">Nezamƒõstnan√Ω</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="employmentLength">D√©lka souƒçasn√©ho zamƒõstn√°n√≠ (mƒõs√≠ce)</label>
                            <input type="number" id="employmentLength" placeholder="24" min="0" max="600" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="familyMembers">Poƒçet osob v dom√°cnosti</label>
                            <input type="number" id="familyMembers" placeholder="2" min="1" max="12" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="previousRental">Zku≈°enosti s pron√°jmem</label>
                            <select id="previousRental" onchange="calculateBonita()">
                                <option value="">Vyberte zku≈°enost</option>
                                <option value="none">≈Ω√°dn√© zku≈°enosti</option>
                                <option value="positive">Pozitivn√≠ reference</option>
                                <option value="negative">Negativn√≠ zku≈°enosti</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- P≈ô√≠jmy -->
            <div id="income" class="tab-content">
                <div class="section">
                    <h3>Anal√Ωza p≈ô√≠jm≈Ø</h3>
                    <div class="info-text">
                        Zadejte v≈°echny zdroje p≈ô√≠jm≈Ø n√°jemn√≠ka. Pro OSVƒå pou≈æijte pr≈Ømƒõrn√Ω mƒõs√≠ƒçn√≠ p≈ô√≠jem za posledn√≠ch 12 mƒõs√≠c≈Ø.
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="mainIncome">Hlavn√≠ p≈ô√≠jem (ƒçist√Ω, Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="mainIncome" placeholder="35000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="additionalIncome">Dodateƒçn√© p≈ô√≠jmy (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="additionalIncome" placeholder="5000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="partnerIncome">P≈ô√≠jem partnera (ƒçist√Ω, Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="partnerIncome" placeholder="0" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="otherResidentsIncome">P≈ô√≠jmy ostatn√≠ch spolubydl√≠c√≠ch (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="otherResidentsIncome" placeholder="0" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="socialBenefits">Soci√°ln√≠ d√°vky (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="socialBenefits" placeholder="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="incomeStability">Stabilita p≈ô√≠jm≈Ø</label>
                            <select id="incomeStability" onchange="calculateBonita()">
                                <option value="">Vyberte stabilitu</option>
                                <option value="stable">Stabiln√≠ (pravideln√Ω plat)</option>
                                <option value="variable">Promƒõnliv√Ω (provize, sez√≥nn√≠)</option>
                                <option value="declining">Klesaj√≠c√≠ trend</option>
                                <option value="growing">Rostouc√≠ trend</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="incomeProof">Dolo≈æen√≠ p≈ô√≠jm≈Ø</label>
                            <select id="incomeProof" onchange="calculateBonita()">
                                <option value="">Vyberte zp≈Øsob dolo≈æen√≠</option>
                                <option value="confirmed">Potvrzeno zamƒõstnavatelem</option>
                                <option value="tax_return">Da≈àov√© p≈ôizn√°n√≠</option>
                                <option value="bank_statements">V√Ωpisy z √∫ƒçtu</option>
                                <option value="unconfirmed">Nedolo≈æeno</option>
                            </select>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="seasonalWork" onchange="calculateBonita()">
                        <label for="seasonalWork">Sez√≥nn√≠ pr√°ce (stavebnictv√≠, cestovn√≠ ruch)</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="probationPeriod" onchange="calculateBonita()">
                        <label for="probationPeriod">Zku≈°ebn√≠ doba (m√©nƒõ ne≈æ 3 mƒõs√≠ce v zamƒõstn√°n√≠)</label>
                    </div>
                </div>
            </div>

            <!-- V√Ωdaje & z√°vazky -->
            <div id="expenses" class="tab-content">
                <div class="section">
                    <h3>Mƒõs√≠ƒçn√≠ z√°vazky a v√Ωdaje</h3>
                    <div class="info-text">
                        Zadejte v≈°echny pravideln√© mƒõs√≠ƒçn√≠ z√°vazky a v√Ωdaje. Tyto √∫daje jsou kl√≠ƒçov√© pro v√Ωpoƒçet disponibiln√≠ho p≈ô√≠jmu.
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="loanPayments">Spl√°tky √∫vƒõr≈Ø (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="loanPayments" placeholder="8000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="creditCards">Spl√°tky kreditn√≠ch karet (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="creditCards" placeholder="2000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="alimony">V√Ω≈æivn√© (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="alimony" placeholder="0" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="insurance">Poji≈°tƒõn√≠ (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="insurance" placeholder="3000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="otherRents">Jin√© n√°jmy (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="otherRents" placeholder="0" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="livingExpenses">≈Ωivotn√≠ n√°klady (Kƒç/mƒõs√≠c)</label>
                            <input type="number" id="livingExpenses" placeholder="15000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="financialReserve">Finanƒçn√≠ rezerva (Kƒç)</label>
                            <input type="number" id="financialReserve" placeholder="50000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="debtHistory">Historie dluh≈Ø</label>
                            <select id="debtHistory" onchange="calculateBonita()">
                                <option value="">Vyberte historii</option>
                                <option value="clean">ƒåist√° historie</option>
                                <option value="minor">Drobn√© probl√©my (opozdƒõn√≠)</option>
                                <option value="major">V√°≈æn√© probl√©my</option>
                                <option value="bankruptcy">Insolvence/exekuce</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="creditRegistry">Kontrola v rejst≈ô√≠c√≠ch</label>
                            <select id="creditRegistry" onchange="calculateBonita()">
                                <option value="">Vyberte stav</option>
                                <option value="not_checked">Nekontrolov√°no</option>
                                <option value="isir_clean">Insolvenƒçn√≠ rejst≈ô√≠k ƒçist√Ω</option>
                                <option value="insolvency">Insolvence</option>
                                <option value="execution_found">Exekuce ‚Äì zji≈°tƒõna</option>
                                <option value="execution_not_found">Exekuce ‚Äì nezji≈°tƒõna</option>
                            </select>
                        </div>
                    </div>

                    <div class="checkbox-group">
                        <input type="checkbox" id="hasExecution" onchange="calculateBonita()">
                        <label for="hasExecution">Aktivn√≠ exekuce</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="hasGuarantor" onchange="calculateBonita()">
                        <label for="hasGuarantor">M√° ruƒçitele</label>
                    </div>
                    <div class="checkbox-group">
                        <input type="checkbox" id="allResidentsSigned" onchange="calculateBonita()">
                        <label for="allResidentsSigned">V≈°ichni spolubydl√≠c√≠ podep√≠≈°√≠ smlouvu</label>
                    </div>
                </div>

                <div class="section" id="guarantorSection" style="display: none;">
                    <h3>Informace o ruƒçiteli</h3>
                    <div class="info-text">
                        Pokud m√° n√°jemn√≠k ruƒçitele, zadejte z√°kladn√≠ informace pro posouzen√≠ jeho bonity.
                    </div>
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="guarantorIncome">Mƒõs√≠ƒçn√≠ p≈ô√≠jem ruƒçitele (Kƒç)</label>
                            <input type="number" id="guarantorIncome" placeholder="40000" min="0" oninput="calculateBonita()">
                        </div>
                        <div class="form-group">
                            <label for="guarantorEmployment">Zamƒõstn√°n√≠ ruƒçitele</label>
                            <select id="guarantorEmployment" onchange="calculateBonita()">
                                <option value="">Vyberte typ</option>
                                <option value="stable">Stabiln√≠ zamƒõstn√°n√≠</option>
                                <option value="selfemployed">OSVƒå</option>
                                <option value="pensioner">D≈Øchodce</option>
                                <option value="property_owner">Vlastn√≠k nemovitost√≠</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="guarantorDebt">Zadlu≈æen√≠ ruƒçitele</label>
                            <select id="guarantorDebt" onchange="calculateBonita()">
                                <option value="">Vyberte stav</option>
                                <option value="low">N√≠zk√© (do 30% p≈ô√≠jmu)</option>
                                <option value="medium">St≈ôedn√≠ (30-50% p≈ô√≠jmu)</option>
                                <option value="high">Vysok√© (nad 50% p≈ô√≠jmu)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="guarantorRelation">Vztah k n√°jemn√≠kovi</label>
                            <select id="guarantorRelation" onchange="calculateBonita()">
                                <option value="">Vyberte vztah</option>
                                <option value="family">Rodinn√Ω p≈ô√≠slu≈°n√≠k</option>
                                <option value="friend">P≈ô√≠tel/zn√°m√Ω</option>
                                <option value="business">Obchodn√≠ partner</option>
                                <option value="other">Jin√Ω</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vyhodnocen√≠ -->
            <div id="evaluation" class="tab-content">
                <button class="calculate-btn" onclick="calculateBonita()">P≈ôepoƒç√≠tat bonitu</button>
                
                <div id="bonitaScore" class="bonita-score">
                    <div class="score-number">0</div>
                    <div class="score-text">Nevyhodnoceno</div>
                    <div>Vypl≈àte √∫daje a kliknƒõte na p≈ôepoƒç√≠tat</div>
                </div>

                <div class="results-grid">
                    <div class="result-card">
                        <h4>Pomƒõr n√°jmu k p≈ô√≠jmu</h4>
                        <div class="result-value" id="rentToIncomeRatio">0%</div>
                        <div class="result-description" id="rentToIncomeDesc">Doporuƒçeno max. 30%</div>
                    </div>
                    <div class="result-card">
                        <h4>Disponibiln√≠ p≈ô√≠jem</h4>
                        <div class="result-value" id="disposableIncome">0 Kƒç</div>
                        <div class="result-description" id="disposableIncomeDesc">Po odeƒçten√≠ v≈°ech z√°vazk≈Ø</div>
                    </div>
                    <div class="result-card">
                        <h4>Finanƒçn√≠ rezerva</h4>
                        <div class="result-value" id="reserveMonths">0</div>
                        <div class="result-description" id="reserveDesc">Poƒçet mƒõs√≠c≈Ø pokryt√≠ n√°jmu</div>
                    </div>
                    <div class="result-card">
                        <h4>Rizikov√© sk√≥re</h4>
                        <div class="result-value" id="riskScore">0</div>
                        <div class="result-description" id="riskScoreDesc">Celkov√© riziko (0-100)</div>
                    </div>
                    <div class="result-card">
                        <h4>Kontrola v rejst≈ô√≠c√≠ch</h4>
                        <div class="result-value" id="registryStatus">Nekontrolov√°no</div>
                        <div class="result-description" id="registryStatusDesc">ISIR/CEE</div>
                    </div>
                </div>

                <div id="recommendations" class="recommendations" style="display: none;">
                    <h4>Doporuƒçen√≠</h4>
                    <div id="recommendationsList"></div>
                </div>

                <div id="riskFactors" class="risk-factors" style="display: none;">
                    <h4>Rizikov√© faktory</h4>
                    <div id="riskFactorsList"></div>
                </div>
            </div>

            <!-- Shrnut√≠ (um√≠stƒõno pod kalkulaƒçkou v r√°mci stejn√©ho kontejneru) -->
            <div class="mb-4 rounded-xl border border-blue-100 bg-blue-50 text-blue-900 p-4">
                <div class="font-semibold mb-1">Shrnut√≠</div>
                <p class="text-sm">Kalkulaƒçka pom√°h√° rychle provƒõ≈ôit z√°jemce. Sledujte <strong>pomƒõr n√°jmu k p≈ô√≠jmu</strong>, <strong>disponibiln√≠ p≈ô√≠jem</strong> a <strong>rejst≈ô√≠ky</strong>. V√Ωsledek berte jako doporuƒçen√≠ ‚Äì stoprocentn√≠ klid p≈ôin√°≈°√≠ <strong>Garantovan√Ω n√°jem</strong>.</p>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-2 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Zjistit v√≠ce ‚Üí</button>
            </div>
            <!-- Promo karta (um√≠stƒõno pod kalkulaƒçkou) -->
            <div class="mb-4 rounded-2xl border border-indigo-100 bg-indigo-50 text-indigo-900 p-4">
                <div class="font-semibold mb-1">Vzorn√Ω n√°jemce ‚Äì Garantovan√Ω n√°jem</div>
                <p class="text-sm">100% klid: n√°jem vypl√°c√≠me vƒças ka≈æd√Ω mƒõs√≠c, screening n√°jemn√≠k≈Ø, pr√°vn√≠ servis a ≈ôe≈°en√≠ oprav za v√°s. Vy jen p≈ôij√≠m√°te platby.</p>
                <div class="flex gap-2 mt-2">
                    <button type="button" class="js-open-cta inline-flex items-center gap-2 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Z√≠skat jistotu ‚Üí</button>
                    <a href="klientska-zona.html" class="inline-flex items-center gap-2 px-3 py-2 rounded-full text-[#0D28F2] bg-[#0D28F2]/10 hover:bg-[#0D28F2]/20 text-sm font-medium">Kontaktovat n√°s</a>
                </div>
            </div>
            <!-- Info banner (um√≠stƒõno pod kalkulaƒçkou) -->
            <div class="mb-4 rounded-xl border border-blue-100 bg-blue-50 text-blue-900 px-4 py-3 text-sm flex items-start gap-2">
                <img src="images/logo.png" alt="Vzorn√Ω n√°jemce" class="h-5 w-auto mt-0.5"/>
                <p><strong>Upozornƒõn√≠:</strong> V√Ωpoƒçty jsou pouze orientaƒçn√≠ a slou≈æ√≠ pro va≈°i informaci. √ödaje se nikam <strong>neukl√°daj√≠</strong> ani d√°le nezpracov√°vaj√≠ bez va≈°eho souhlasu.</p>
            </div>
            <!-- GDPR notice (duplicitnƒõ i uvnit≈ô kalkulaƒçkov√©ho kontejneru) -->
            <div class="mb-4 rounded-xl border border-blue-100 bg-blue-50 text-blue-900 px-5 py-4 text-sm leading-6">
                <strong>Ochrana osobn√≠ch √∫daj≈Ø:</strong> √ödaje zadan√© do kalkulaƒçky slou≈æ√≠ v√Ωhradnƒõ pro orientaƒçn√≠ vyhodnocen√≠ bonity a nejsou ukl√°d√°ny bez va≈°eho souhlasu. 
                P≈ôed uzav≈ôen√≠m smlouvy doporuƒçujeme prov√©st samostatn√© ovƒõ≈ôen√≠ v registru ISIR a CEE. Podrobnosti o zpracov√°n√≠ √∫daj≈Ø naleznete v dokumentu 
                <a href="gdpr.html" class="underline font-medium hover:opacity-80">Z√°sady ochrany osobn√≠ch √∫daj≈Ø</a>.
            </div>
            </div>
        </div>

    <!-- Jak pou≈æ√≠vat kalkulaƒçku: pr≈Øvodce -->
    <div class="max-w-6xl mx-auto mt-6">
        <div class="rounded-2xl bg-white shadow p-6">
            <h2 class="text-xl font-semibold mb-3">Jak pou≈æ√≠vat kalkulaƒçku bonity n√°jemn√≠ka</h2>
            <p class="text-sm text-gray-700 mb-4">Praktick√Ω n√°vod pro majitele byt≈Ø a pronaj√≠matele</p>

            <h3 class="font-semibold mt-2 mb-2">1. Co kalkulaƒçka vyhodnocuje</h3>
            <p class="text-sm text-gray-700 mb-2">Na≈°e kalkulaƒçka v√°m pom≈Ø≈æe rychle zjistit, zda je z√°jemce o pron√°jem finanƒçnƒõ spolehliv√Ω. Vyhodnocuje:</p>
            <ul class="list-disc ml-6 text-sm text-gray-700 space-y-1 mb-3">
                <li>v√Ω≈°i n√°jemn√©ho,</li>
                <li>p≈ô√≠jmy dom√°cnosti,</li>
                <li>pravideln√© z√°vazky (√∫vƒõry, alimenty, jin√© n√°jmy),</li>
                <li>stabilitu zamƒõstn√°n√≠,</li>
                <li>finanƒçn√≠ rezervu,</li>
                <li>p≈ô√≠padn√© z√°znamy v rejst≈ô√≠c√≠ch (insolvence ‚Äì ISIR, exekuce ‚Äì CEE).</li>
            </ul>
            <p class="text-sm text-gray-700 mb-3">üí° Smyslem je odhalit rizika je≈°tƒõ p≈ôed podpisem smlouvy.</p>
            <div>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-1 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Ovƒõ≈ôit z√°jemce s Vzorn√Ωm n√°jemcem ‚Üí</button>
            </div>

            <h3 class="font-semibold mt-4 mb-2">2. Jak ƒç√≠st v√Ωsledky (sk√≥re 0‚Äì100)</h3>
            <ul class="list-disc ml-6 text-sm text-gray-700 space-y-1 mb-3">
                <li><strong>70‚Äì100 bod≈Ø:</strong> V√Ωborn√° bonita ‚Äì n√°jemn√≠k m√° dostateƒçn√Ω p≈ô√≠jem a stabilitu. Obvykle postaƒç√≠ standardn√≠ podm√≠nky (kauce 1‚Äì2√ó n√°jemn√©).</li>
                <li><strong>50‚Äì69 bod≈Ø:</strong> St≈ôedn√≠ bonita ‚Äì doporuƒçujeme vƒõt≈°√≠ obez≈ôetnost. M≈Ø≈æe pomoci vy≈°≈°√≠ kauce (2‚Äì3√ó n√°jemn√©) nebo ruƒçitel.</li>
                <li><strong>30‚Äì49 bod≈Ø:</strong> N√≠zk√° bonita ‚Äì vy≈°≈°√≠ riziko. Vhodn√© je podrobnƒõj≈°√≠ provƒõ≈ôen√≠, maxim√°ln√≠ z√°konn√° kauce (3√ó n√°jemn√©) a zv√°≈æen√≠ ruƒçitele.</li>
                <li><strong>0‚Äì29 bod≈Ø:</strong> Kritick√© riziko ‚Äì p≈ô√≠jem nestaƒç√≠ na pokryt√≠ n√°jemn√©ho nebo jsou zji≈°tƒõny probl√©my v rejst≈ô√≠c√≠ch. Zde doporuƒçujeme maxim√°ln√≠ opatrnost.</li>
            </ul>
            <div>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-1 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Chci garantovan√© n√°jemn√© ‚Üí</button>
            </div>

            <h3 class="font-semibold mt-4 mb-2">3. D≈Øle≈æit√© ukazatele</h3>
            <ul class="list-disc ml-6 text-sm text-gray-700 space-y-1 mb-3">
                <li><strong>Pomƒõr n√°jmu k p≈ô√≠jmu</strong> ‚Äì ide√°lnƒõ do 30 %. Nad 40 % u≈æ se zvy≈°uje riziko neplacen√≠.</li>
                <li><strong>Disponibiln√≠ p≈ô√≠jem</strong> ‚Äì mƒõl by b√Ωt vy≈°≈°√≠ ne≈æ n√°jem.</li>
                <li><strong>Finanƒçn√≠ rezerva</strong> ‚Äì 3‚Äì6 mƒõs√≠c≈Ø je dobr√Ω z√°klad, m√©nƒõ ne≈æ 1 mƒõs√≠c znamen√° zv√Ω≈°en√© riziko.</li>
                <li><strong>Rejst≈ô√≠ky (ISIR, CEE)</strong> ‚Äì aktivn√≠ insolvence nebo exekuce jsou sign√°lem k vƒõt≈°√≠ opatrnosti.</li>
            </ul>
            <p class="text-sm text-gray-700 mb-2">üëâ Na≈°e kalkulaƒçka v√°m uk√°≈æe sk√≥re, ale skuteƒçn√Ω klid p≈ôin√°≈°√≠ a≈æ Vzorn√Ω n√°jemce.</p>
            <div>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-1 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Zjistit, jak funguje Vzorn√Ω n√°jemce ‚Üí</button>
            </div>

            <h3 class="font-semibold mt-4 mb-2">4. Jak s v√Ωsledky pracovat</h3>
            <ul class="list-disc ml-6 text-sm text-gray-700 space-y-1 mb-3">
                <li>Berte kalkulaƒçku jako <strong>orientaƒçn√≠ pom≈Øcku</strong>, kter√° uk√°≈æe hlavn√≠ rizika.</li>
                <li>V≈ædy po≈æadujte <strong>dolo≈æen√≠ p≈ô√≠jm≈Ø</strong> (v√Ωpisy z √∫ƒçtu, potvrzen√≠ zamƒõstnavatele, da≈àov√© p≈ôizn√°n√≠ u OSVƒå).</li>
                <li>Ptejte se na souvislosti ‚Äì kr√°tk√° doba v zamƒõstn√°n√≠ nemus√≠ b√Ωt probl√©m, pokud jde o obor s vysokou popt√°vkou.</li>
                <li>Nepodce≈àujte <strong>n√°jemn√≠ smlouvu a p≈ôed√°vac√≠ protokol</strong> ‚Äì ty jsou pro ochranu majitele i n√°jemn√≠ka kl√≠ƒçov√©.</li>
            </ul>
            <p class="text-sm text-gray-700 mb-2">üëâ Chcete m√≠t smlouvy, kontroly i n√°jemn√≠ky pod dohledem? S Vzorn√Ωm n√°jemcem se o v≈°e postar√°me za v√°s.</p>
            <div>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-1 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Spolehnout se na Vzorn√Ω n√°jemce ‚Üí</button>
            </div>

            <h3 class="font-semibold mt-4 mb-2">5. Jak m√≠t √∫plnou jistotu</h3>
            <p class="text-sm text-gray-700 mb-2">Ani peƒçlivƒõ vybran√Ω n√°jemn√≠k nen√≠ z√°rukou, ≈æe se jeho situace v budoucnu nezmƒõn√≠. Proto je tu slu≈æba <strong>Vzorn√Ω n√°jemce</strong>:</p>
            <ul class="list-disc ml-6 text-sm text-gray-700 space-y-1 mb-3">
                <li>n√°jemn√© dost√°v√°te pravidelnƒõ ka≈æd√Ω mƒõs√≠c,</li>
                <li>komunikaci s n√°jemn√≠ky a p≈ô√≠padn√© probl√©my ≈ôe≈°√≠me my,</li>
                <li>smlouvy, kontroly i spr√°va jsou v na≈°ich rukou,</li>
                <li>vy m√°te klid a jistotu, ≈æe byt vydƒõl√°v√°.</li>
            </ul>
            <div>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-1 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">M√≠t jistotu s Vzorn√Ωm n√°jemcem ‚Üí</button>
            </div>

            <div class="rounded-lg bg-indigo-50 border border-indigo-100 p-4 mt-4">
                <div class="font-semibold text-indigo-900">Shrnut√≠</div>
                <p class="text-sm text-indigo-900 mt-1">Kalkulaƒçka v√°m pom≈Ø≈æe rychle zjistit, zda je z√°jemce finanƒçnƒõ spolehliv√Ω. Sledujte hlavnƒõ pomƒõr n√°jmu k p≈ô√≠jmu, disponibiln√≠ p≈ô√≠jem a z√°znamy v rejst≈ô√≠c√≠ch. V√Ωsledek berte jako doporuƒçen√≠ ‚Äì ale pokud chcete stoprocentn√≠ klid, vyu≈æijte slu≈æbu Vzorn√Ω n√°jemce, kter√° v√°m zaruƒç√≠ pravideln√Ω p≈ô√≠jem a bezstarostn√Ω pron√°jem.</p>
                <button type="button" class="js-open-cta inline-flex items-center gap-2 mt-2 px-3 py-2 rounded-full text-white bg-[#0D28F2] hover:bg-[#0D28F2]/90 text-sm font-medium">Chci garantovan√Ω n√°jem od Vzorn√©ho n√°jemce ‚Üí</button>
            </div>
        </div>
    </div>

    <script>
        function showTab(event, tabName) {
            // Hide all tab contents
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => content.classList.remove('active'));
            
            // Remove active class from all tabs
            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => tab.classList.remove('active'));
            
            // Show selected tab content
            document.getElementById(tabName).classList.add('active');
            
            // Add active class to clicked tab
            (event.currentTarget || event.target).classList.add('active');
        }
        
        // Show/hide guarantor section based on checkbox
        document.addEventListener('DOMContentLoaded', function() {
            const guarantorCheckbox = document.getElementById('hasGuarantor');
            const guarantorSection = document.getElementById('guarantorSection');
            
            guarantorCheckbox.addEventListener('change', function() {
                if (this.checked) {
                    guarantorSection.style.display = 'block';
                } else {
                    guarantorSection.style.display = 'none';
                    // Clear guarantor fields
                    document.getElementById('guarantorIncome').value = '';
                    document.getElementById('guarantorEmployment').value = '';
                    document.getElementById('guarantorDebt').value = '';
                    document.getElementById('guarantorRelation').value = '';
                }
            });
        });

        function calculateBonita() {
            // Get all input values
            const monthlyRent = parseFloat(document.getElementById('monthlyRent').value) || 0;
            const mainIncome = parseFloat(document.getElementById('mainIncome').value) || 0;
            const additionalIncome = parseFloat(document.getElementById('additionalIncome').value) || 0;
            const partnerIncome = parseFloat(document.getElementById('partnerIncome').value) || 0;
            const socialBenefits = parseFloat(document.getElementById('socialBenefits').value) || 0;
            
            const loanPayments = parseFloat(document.getElementById('loanPayments').value) || 0;
            const creditCards = parseFloat(document.getElementById('creditCards').value) || 0;
            const alimony = parseFloat(document.getElementById('alimony').value) || 0;
            const insurance = parseFloat(document.getElementById('insurance').value) || 0;
            const otherRents = parseFloat(document.getElementById('otherRents').value) || 0;
            const livingExpenses = parseFloat(document.getElementById('livingExpenses').value) || 0;
            const financialReserve = parseFloat(document.getElementById('financialReserve').value) || 0;
            
            const employmentType = document.getElementById('employmentType').value;
            const employmentLength = parseFloat(document.getElementById('employmentLength').value) || 0;
            const incomeStability = document.getElementById('incomeStability').value;
            const incomeProof = document.getElementById('incomeProof').value;
            const debtHistory = document.getElementById('debtHistory').value;
            const creditRegistry = document.getElementById('creditRegistry').value;
            const previousRental = document.getElementById('previousRental').value;
            
            const hasExecution = document.getElementById('hasExecution').checked;
            const hasGuarantor = document.getElementById('hasGuarantor').checked;
            const allResidentsSigned = document.getElementById('allResidentsSigned').checked;
            const seasonalWork = document.getElementById('seasonalWork').checked;
            const probationPeriod = document.getElementById('probationPeriod').checked;
            
            // Guarantor info
            const guarantorIncome = parseFloat(document.getElementById('guarantorIncome').value) || 0;
            const guarantorEmployment = document.getElementById('guarantorEmployment').value;
            const guarantorDebt = document.getElementById('guarantorDebt').value;
            const guarantorRelation = document.getElementById('guarantorRelation').value;

            // Calculate totals
            const otherResidentsIncome = parseFloat(document.getElementById('otherResidentsIncome').value) || 0;
            const totalIncome = mainIncome + additionalIncome + partnerIncome + socialBenefits + otherResidentsIncome;
            const totalExpenses = loanPayments + creditCards + alimony + insurance + otherRents + livingExpenses;
            const disposableIncome = totalIncome - totalExpenses;
            
            // Calculate key ratios
            const rentToIncomeRatio = totalIncome > 0 ? (monthlyRent / totalIncome) * 100 : 0;
            const reserveMonths = monthlyRent > 0 ? financialReserve / monthlyRent : 0;
            
            // Odstranƒõn blok omezen√≠: kalkulace bƒõ≈æ√≠ i p≈ôi pr√°zdn√Ωch hodnot√°ch

            // Calculate bonita score (0-100)
            let bonitaScore = 100;
            let riskFactors = [];
            let recommendations = [];

            // Income to rent ratio evaluation
            if (rentToIncomeRatio > 40) {
                bonitaScore -= 30;
                riskFactors.push('N√°jemn√© p≈ôekraƒçuje 40% p≈ô√≠jmu - vysok√© riziko');
                recommendations.push('Zv√°≈æit ruƒçitele a vy≈°≈°√≠ kauci (a≈æ 3√ó n√°jemn√©)');
            } else if (rentToIncomeRatio > 30) {
                bonitaScore -= 15;
                riskFactors.push('N√°jemn√© p≈ôekraƒçuje 30% p≈ô√≠jmu - st≈ôedn√≠ riziko');
                recommendations.push('Zv√°≈æit po≈æadavek na ruƒçitele nebo vy≈°≈°√≠ kauci (2-3x n√°jemn√©)');
            } else if (rentToIncomeRatio > 0 && rentToIncomeRatio < 25) {
                bonitaScore += 5;
                recommendations.push('N√≠zk√Ω pomƒõr n√°jmu k p≈ô√≠jmu ‚Äì pozitivn√≠ faktor');
            }

            // Employment type evaluation
            switch (employmentType) {
                case 'selfemployed':
                    bonitaScore -= 15;
                    riskFactors.push('OSVƒå - vy≈°≈°√≠ riziko nestabiln√≠ch p≈ô√≠jm≈Ø');
                    recommendations.push('Vy≈æ√°dat da≈àov√° p≈ôizn√°n√≠ za 2 roky a v√Ωpisy z √∫ƒçtu za 6 mƒõs√≠c≈Ø');
                    break;
                case 'contract':
                    bonitaScore -= 10;
                    riskFactors.push('Pr√°ce na DPP/DPƒå - ni≈æ≈°√≠ jistota zamƒõstn√°n√≠');
                    break;
                case 'student':
                    bonitaScore -= 20;
                    riskFactors.push('Student - nestabiln√≠ p≈ô√≠jmy');
                    recommendations.push('Po≈æadovat ruƒçitele a vy≈°≈°√≠ kauci');
                    break;
                case 'unemployed':
                    bonitaScore -= 40;
                    riskFactors.push('Nezamƒõstnan√Ω - ≈æ√°dn√Ω pravideln√Ω p≈ô√≠jem');
                    recommendations.push('Po≈æadovat solventn√≠ho ruƒçitele');
                    break;
                case 'pensioner':
                    if (totalIncome < 20000) {
                        bonitaScore -= 10;
                        riskFactors.push('N√≠zk√Ω d≈Øchod - omezen√° platebn√≠ schopnost');
                    }
                    break;
            }

            // Employment length evaluation
            if (employmentLength < 6) {
                bonitaScore -= 15;
                riskFactors.push('Kr√°tk√° doba zamƒõstn√°n√≠ (m√©nƒõ ne≈æ 6 mƒõs√≠c≈Ø)');
                recommendations.push('Po≈æadovat ruƒçitele nebo vy≈°≈°√≠ kauci');
            } else if (employmentLength < 12) {
                bonitaScore -= 8;
                riskFactors.push('Relativnƒõ kr√°tk√° doba zamƒõstn√°n√≠');
            }

            // Income stability evaluation
            switch (incomeStability) {
                case 'declining':
                    bonitaScore -= 20;
                    riskFactors.push('Klesaj√≠c√≠ trend p≈ô√≠jm≈Ø');
                    break;
                case 'variable':
                    bonitaScore -= 10;
                    riskFactors.push('Promƒõnliv√© p≈ô√≠jmy');
                    break;
                case 'growing':
                    bonitaScore += 5;
                    break;
            }

            // Income proof evaluation
            switch (incomeProof) {
                case 'unconfirmed':
                    bonitaScore -= 25;
                    riskFactors.push('Nedolo≈æen√© p≈ô√≠jmy');
                    recommendations.push('Vy≈æ√°dat ofici√°ln√≠ potvrzen√≠ o p≈ô√≠jmech');
                    break;
                case 'bank_statements':
                    bonitaScore -= 10;
                    riskFactors.push('P≈ô√≠jmy dolo≈æeny pouze v√Ωpisy z √∫ƒçtu');
                    break;
            }

            // Debt history evaluation
            switch (debtHistory) {
                case 'bankruptcy':
                    bonitaScore -= 40;
                    riskFactors.push('Historie insolvence/exekuce');
                    recommendations.push('D≈Økladnƒõ zv√°≈æit riziko, po≈æadovat vysokou kauci');
                    break;
                case 'major':
                    bonitaScore -= 25;
                    riskFactors.push('V√°≈æn√© probl√©my s dluhy v minulosti');
                    break;
                case 'minor':
                    bonitaScore -= 10;
                    riskFactors.push('Drobn√© probl√©my s platbami v minulosti');
                    break;
            }

            // Registry evaluation (ISIR/CEE)
            switch (creditRegistry) {
                case 'not_checked':
                    bonitaScore -= 5;
                    riskFactors.push('Rejst≈ô√≠ky neprovƒõ≈ôeny');
                    recommendations.push('Doporuƒçujeme provƒõ≈ôit ISIR (insolvence) a CEE (exekuce)');
                    break;
                case 'isir_clean':
                    bonitaScore += 3;
                    recommendations.push('ISIR bez z√°znamu ‚Äì pozitivn√≠ faktor');
                    break;
                case 'insolvency':
                    bonitaScore -= 50;
                    riskFactors.push('Zji≈°tƒõna insolvence ‚Äì kritick√© riziko');
                    recommendations.push('Kritick√© riziko ‚Äì doporuƒçujeme maxim√°ln√≠ zaji≈°tƒõn√≠ (vy≈°≈°√≠ kauce, ruƒçitel) a individu√°ln√≠ posouzen√≠');
                    break;
                case 'execution_found':
                    bonitaScore -= 30;
                    riskFactors.push('Zji≈°tƒõna exekuce');
                    recommendations.push('Zv√°≈æit ruƒçitele a vy≈°≈°√≠ kauci (a≈æ 3√ó n√°jemn√©); rozhodnut√≠ ponechat na individu√°ln√≠m posouzen√≠');
                    break;
                case 'execution_not_found':
                    bonitaScore += 2;
                    recommendations.push('CEE bez z√°znamu ‚Äì pozitivn√≠ faktor');
                    break;
            }

            // Previous rental experience
            switch (previousRental) {
                case 'negative':
                    bonitaScore -= 20;
                    riskFactors.push('Negativn√≠ zku≈°enosti s pron√°jmem');
                    break;
                case 'positive':
                    bonitaScore += 5;
                    break;
            }

            // Additional risk factors
            if (hasExecution) {
                bonitaScore -= 30;
                riskFactors.push('Aktivn√≠ exekuce');
                recommendations.push('Po≈æadovat ruƒçitele a vy≈°≈°√≠ kauci (a≈æ 3√ó n√°jemn√©); p≈ô√≠padnƒõ individu√°ln√≠ posouzen√≠');
            }

            if (seasonalWork) {
                bonitaScore -= 10;
                riskFactors.push('Sez√≥nn√≠ pr√°ce - nestabiln√≠ p≈ô√≠jmy bƒõhem roku');
                recommendations.push('Vy≈æ√°dat p≈ô√≠jmy za cel√Ω rok, zv√°≈æit kauci podle nejni≈æ≈°√≠ho mƒõs√≠ƒçn√≠ho p≈ô√≠jmu');
            }

            if (probationPeriod) {
                bonitaScore -= 15;
                riskFactors.push('Zku≈°ebn√≠ doba - nejistota pokraƒçov√°n√≠ zamƒõstn√°n√≠');
                recommendations.push('Poƒçkat na ukonƒçen√≠ zku≈°ebn√≠ doby nebo po≈æadovat ruƒçitele');
            }

            // Guarantor evaluation
            if (hasGuarantor) {
                let guarantorBonus = 15;
                
                // Evaluate guarantor quality
                if (guarantorIncome >= totalIncome * 2) {
                    guarantorBonus += 10;
                    recommendations.push('Ruƒçitel s vysok√Ωmi p≈ô√≠jmy - v√Ωborn√° z√°ruka');
                } else if (guarantorIncome < totalIncome) {
                    guarantorBonus -= 5;
                    riskFactors.push('Ruƒçitel m√° ni≈æ≈°√≠ p≈ô√≠jmy ne≈æ n√°jemn√≠k');
                }
                
                switch (guarantorEmployment) {
                    case 'stable':
                        guarantorBonus += 5;
                        break;
                    case 'property_owner':
                        guarantorBonus += 10;
                        recommendations.push('Ruƒçitel vlastn√≠k nemovitost√≠ - v√Ωborn√° z√°ruka');
                        break;
                    case 'selfemployed':
                        guarantorBonus -= 3;
                        break;
                }
                
                switch (guarantorDebt) {
                    case 'high':
                        guarantorBonus -= 8;
                        riskFactors.push('Ruƒçitel m√° vysok√© zadlu≈æen√≠');
                        break;
                    case 'medium':
                        guarantorBonus -= 3;
                        break;
                }
                
                if (guarantorRelation === 'family') {
                    guarantorBonus += 3;
                }
                
                bonitaScore += guarantorBonus;
                recommendations.push(`Ruƒçitel p≈ôin√°≈°√≠ ${guarantorBonus} bod≈Ø - ovƒõ≈ôit jeho bonitu`);
            }

            if (reserveMonths >= 6) {
                bonitaScore += 15;
                recommendations.push('V√Ωborn√° finanƒçn√≠ rezerva - n√≠zk√© riziko');
            } else if (reserveMonths >= 3) {
                bonitaScore += 10;
            } else if (reserveMonths < 1) {
                bonitaScore -= 15;
                riskFactors.push('Nedostateƒçn√° finanƒçn√≠ rezerva');
                recommendations.push('Zv√°≈æit vy≈°≈°√≠ kauci (a≈æ 3√ó n√°jemn√©) kv≈Øli n√≠zk√© finanƒçn√≠ rezervƒõ');
            }

            // Advanced risk combinations
            const highRiskCombination = (employmentType === 'selfemployed' && employmentLength < 24) ||
                                      (employmentType === 'contract' && reserveMonths < 2) ||
                                      (rentToIncomeRatio > 35 && incomeStability === 'variable');
            
            if (highRiskCombination) {
                riskFactors.push('Kombinace rizikov√Ωch faktor≈Ø - zv√Ω≈°en√© riziko');
                recommendations.push('Doporuƒçujeme d≈Økladnou kontrolu v≈°ech dokument≈Ø a vy≈°≈°√≠ kauci (a≈æ 3√ó n√°jemn√©)');
            }

            // Age-related recommendations
            const age = parseFloat(document.getElementById('age').value) || 0;
            if (age < 25 && employmentLength < 12) {
                riskFactors.push('Mlad√Ω vƒõk s kr√°tkou pracovn√≠ histori√≠');
                recommendations.push('Zv√°≈æit po≈æadavek na ruƒçitele nebo rodiƒçe jako spolupodepsan√©');
            }
            
            if (age > 65 && employmentType === 'pensioner' && totalIncome < 18000) {
                riskFactors.push('Senior s n√≠zk√Ωm d≈Øchodem');
                recommendations.push('Ovƒõ≈ôit stabilitu d≈Øchodu a p≈ô√≠padn√© p≈ô√≠jmy z investic');
            }

            // Income vs expenses validation
            if (disposableIncome < monthlyRent) {
                riskFactors.push('Kritick√©: Disponibiln√≠ p≈ô√≠jem je ni≈æ≈°√≠ ne≈æ n√°jemn√©');
                recommendations.push('Kritick√©: nedostateƒçn√© prost≈ôedky na n√°jem ‚Äì doporuƒçujeme siln√© zaji≈°tƒõn√≠ (vy≈°≈°√≠ kauce, ruƒçitel) a individu√°ln√≠ posouzen√≠');
                bonitaScore = Math.min(bonitaScore, 20); // Cap at very low score
            }

            // Multiple income sources validation
            const incomeSourcesCount = [mainIncome, additionalIncome, partnerIncome, socialBenefits, otherResidentsIncome].filter(income => income > 0).length;
            
            // Residents solidarity evaluation
            if (otherResidentsIncome > 0 && !allResidentsSigned) {
                riskFactors.push('P≈ô√≠jmy od spolubydl√≠c√≠ch, kte≈ô√≠ nepodep√≠≈°√≠ smlouvu');
                recommendations.push('V≈°ichni p≈ô√≠jmovƒõ aktivn√≠ spolubydl√≠c√≠ mus√≠ podepsat smlouvu jako solid√°rn√≠ dlu≈æn√≠ci');
                bonitaScore -= 10;
            } else if (otherResidentsIncome > 0 && allResidentsSigned) {
                bonitaScore += 5;
                recommendations.push('V≈°ichni spolubydl√≠c√≠ podep√≠≈°√≠ jako solid√°rn√≠ dlu≈æn√≠ci - sn√≠≈æen√© riziko');
            }
            if (incomeSourcesCount === 1 && mainIncome < 30000) {
                riskFactors.push('Z√°vislost na jedin√©m zdroji p≈ô√≠jmu');
                recommendations.push('Zv√°≈æit diverzifikaci p≈ô√≠jm≈Ø nebo po≈æadovat ruƒçitele');
            }

            // Debt to income ratio
            const debtToIncomeRatio = totalIncome > 0 ? ((loanPayments + creditCards + alimony) / totalIncome) * 100 : 0;
            if (debtToIncomeRatio > 50) {
                bonitaScore -= 20;
                riskFactors.push('Vysok√© zadlu≈æen√≠ - v√≠ce ne≈æ 50% p≈ô√≠jmu');
                recommendations.push('Po≈æadovat sn√≠≈æen√≠ dluh≈Ø p≈ôed podpisem smlouvy');
            } else if (debtToIncomeRatio > 30) {
                bonitaScore -= 10;
                riskFactors.push('St≈ôedn√≠ zadlu≈æen√≠ - 30-50% p≈ô√≠jmu');
            }

            // Family size considerations
            const familyMembers = parseFloat(document.getElementById('familyMembers').value) || 1;
            const incomePerPerson = totalIncome / familyMembers;
            if (incomePerPerson < 15000 && familyMembers > 2) {
                riskFactors.push('N√≠zk√Ω p≈ô√≠jem na osobu ve vƒõt≈°√≠ dom√°cnosti');
                recommendations.push('Ovƒõ≈ôit soci√°ln√≠ d√°vky a podporu pro rodiny s dƒõtmi');
            }

            // Final recommendations based on score
            if (bonitaScore >= 70) {
                recommendations.push('N√≠zk√© riziko ‚Äì standardn√≠ podm√≠nky (1‚Äì2√ó n√°jemn√© jako kauce)');
            } else if (bonitaScore >= 50) {
                recommendations.push('St≈ôedn√≠ riziko ‚Äì zv√°≈æit zv√Ω≈°enou kauci (2‚Äì3√ó n√°jemn√©) a d≈Økladnƒõj≈°√≠ kontrolu');
            } else if (bonitaScore >= 30) {
                recommendations.push('Vysok√© riziko ‚Äì zv√°≈æit ruƒçitele a vy≈°≈°√≠ kauci (a≈æ 3√ó n√°jemn√©); rozhodnut√≠ je na v√°s');
            } else {
                recommendations.push('Kritick√© riziko ‚Äì doporuƒçujeme maxim√°ln√≠ zaji≈°tƒõn√≠ a peƒçliv√© individu√°ln√≠ posouzen√≠');
            }

            // Industry-specific warnings
            if (employmentType === 'selfemployed') {
                recommendations.push('OSVƒå: Vy≈æ√°dat potvrzen√≠ o bezdlu≈ænosti v≈Øƒçi ƒåSSZ a finanƒçn√≠mu √∫≈ôadu');
            }
            
            // Registry checks recommendation
            if (creditRegistry === 'not_checked') {
                recommendations.push('Doporuƒçujeme provƒõ≈ôit ISIR (insolvence) a CEE (exekuce)');
            }

            // Seasonal timing recommendations
            const currentMonth = new Date().getMonth() + 1;
            if (seasonalWork && (currentMonth >= 11 || currentMonth <= 2)) {
                recommendations.push('Sez√≥nn√≠ pr√°ce v zimn√≠m obdob√≠ - zv√Ω≈°en√© riziko sn√≠≈æen√Ωch p≈ô√≠jm≈Ø');
            }

            // Ensure score is within bounds
            bonitaScore = Math.max(0, Math.min(100, bonitaScore));
            const riskScore = 100 - bonitaScore;

            // Update UI
            updateBonitaDisplay(bonitaScore, rentToIncomeRatio, disposableIncome, reserveMonths, riskScore, riskFactors, recommendations, creditRegistry);
        }

        function updateBonitaDisplay(bonitaScore, rentToIncomeRatio, disposableIncome, reserveMonths, riskScore, riskFactors, recommendations, creditRegistry) {
            // Update bonita score display
            const scoreElement = document.querySelector('.score-number');
            const scoreTextElement = document.querySelector('.score-text');
            const scoreContainer = document.getElementById('bonitaScore');
            
            scoreElement.textContent = Math.round(bonitaScore);
            
            // Update score classification and styling
            scoreContainer.className = 'bonita-score';
            if (bonitaScore >= 70) {
                scoreTextElement.textContent = 'V√Ωborn√° bonita';
                scoreContainer.classList.add('high');
            } else if (bonitaScore >= 50) {
                scoreTextElement.textContent = 'St≈ôedn√≠ bonita';
                scoreContainer.classList.add('medium');
            } else {
                scoreTextElement.textContent = 'N√≠zk√° bonita';
                scoreContainer.classList.add('low');
            }

            // Update result cards
            updateResultCard('rentToIncomeRatio', rentToIncomeRatio.toFixed(1) + '%', 
                rentToIncomeRatio > 40 ? 'danger' : rentToIncomeRatio > 30 ? 'warning' : 'success');
            
            updateResultCard('disposableIncome', formatCurrency(disposableIncome), 
                disposableIncome < 0 ? 'danger' : disposableIncome < 10000 ? 'warning' : 'success');
            
            updateResultCard('reserveMonths', reserveMonths.toFixed(1), 
                reserveMonths < 1 ? 'danger' : reserveMonths < 3 ? 'warning' : 'success');
            
            updateResultCard('riskScore', Math.round(riskScore), 
                riskScore > 50 ? 'danger' : riskScore > 30 ? 'warning' : 'success');

            // Update registry status
            let registryStatusText = 'Nekontrolov√°no';
            let registryStatusClass = 'warning';
            switch (creditRegistry) {
                case 'isir_clean':
                    registryStatusText = 'ISIR: bez z√°znamu';
                    registryStatusClass = 'success';
                    break;
                case 'execution_not_found':
                    registryStatusText = 'CEE: bez z√°znamu';
                    registryStatusClass = 'success';
                    break;
                case 'execution_found':
                    registryStatusText = 'CEE: exekuce zji≈°tƒõna';
                    registryStatusClass = 'danger';
                    break;
                case 'insolvency':
                    registryStatusText = 'ISIR: insolvence zji≈°tƒõna';
                    registryStatusClass = 'danger';
                    break;
                case 'not_checked':
                    registryStatusText = 'Nekontrolov√°no';
                    registryStatusClass = 'warning';
                    break;
                default:
                    registryStatusText = 'Nevybr√°no';
                    registryStatusClass = 'warning';
                    break;
            }
            updateResultCard('registryStatus', registryStatusText, registryStatusClass);

            // Update recommendations
            updateRecommendations(recommendations);
            
            // Update risk factors
            updateRiskFactors(riskFactors);
        }

        function updateResultCard(id, value, status) {
            const valueElement = document.getElementById(id);
            const cardElement = valueElement.closest('.result-card');
            
            valueElement.textContent = value;
            valueElement.className = 'result-value ' + status;
            
            cardElement.className = 'result-card';
        }

        function updateRecommendations(recommendations) {
            const container = document.getElementById('recommendations');
            const listElement = document.getElementById('recommendationsList');
            
            // Dedupe and normalize recommendations
            // Remove hard reject-style recommendations so user can decide independently
            const rejectRe = /(odm√≠tn|nedoporuƒç|nepronaj)/i;
            const unique = Array.from(new Set(
                recommendations
                    .filter(Boolean)
                    .filter(rec => !rejectRe.test(rec))
            ));
            if (unique.length > 0) {
                container.style.display = 'block';
                listElement.innerHTML = unique.map(rec => 
                    `<div class="recommendation-item">${rec}</div>`
                ).join('');
            } else {
                container.style.display = 'none';
            }
        }

        function updateRiskFactors(riskFactors) {
            const container = document.getElementById('riskFactors');
            const listElement = document.getElementById('riskFactorsList');
            
            if (riskFactors.length > 0) {
                container.style.display = 'block';
                listElement.innerHTML = riskFactors.map(risk => 
                    `<div class="risk-item">${risk}</div>`
                ).join('');
            } else {
                container.style.display = 'none';
            }
        }

        function formatCurrency(amount) {
            return new Intl.NumberFormat('cs-CZ', {
                style: 'currency',
                currency: 'CZK',
                minimumFractionDigits: 0,
                maximumFractionDigits: 0
            }).format(amount);
        }
    </script>
    <script>
        // Vanilla JS controller for password gate
        (function() {
            const closeBtn = document.getElementById('closeGateBtn');
            const modal = document.getElementById('gateModal');
            const pwdInput = document.getElementById('gatePassword');
            const unlockBtn = document.getElementById('unlockBtn');
            const errorEl = document.getElementById('gateError');
            const container = document.getElementById('calculatorContainer');
            const notice = document.getElementById('lockedNotice');
            const reopenBtn = document.getElementById('reopenGate');
            // CTA modal
            const ctaModal = document.getElementById('ctaModal');
            const closeCtaBtn = document.getElementById('closeCtaBtn');
            const ctaTriggers = document.querySelectorAll('.js-open-cta');

            const checkPassword = (p) => p === 'vzorny2025'; // demo only

            function openModal() {
                modal.classList.remove('hidden');
                modal.classList.add('flex');
                errorEl.classList.add('hidden');
                errorEl.textContent = '';
                pwdInput.value = '';
                setTimeout(() => pwdInput.focus(), 0);
            }
            function closeModal() {
                modal.classList.add('hidden');
                modal.classList.remove('flex');
            }
            function unlock() {
                const val = pwdInput.value || '';
                if (checkPassword(val)) {
                    container.classList.remove('locked');
                    if (notice) notice.style.display = 'none';
                    closeModal();
                } else {
                    errorEl.textContent = 'Nespr√°vn√© heslo';
                    errorEl.classList.remove('hidden');
                }
            }

            // CTA modal helpers
            function openCta() {
                if (ctaModal) {
                    ctaModal.classList.remove('hidden');
                    ctaModal.classList.add('flex');
                } else {
                    window.location.href = 'klientska-zona.html';
                }
            }
            function closeCta() {
                if (!ctaModal) return;
                ctaModal.classList.add('hidden');
                ctaModal.classList.remove('flex');
            }

            closeBtn?.addEventListener('click', closeModal);
            modal?.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
            unlockBtn?.addEventListener('click', unlock);
            reopenBtn?.addEventListener('click', (e) => {
                e.preventDefault();
                openModal();
            });
            pwdInput?.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    e.preventDefault();
                    unlock();
                }
            });

            // CTA modal bindings
            ctaTriggers.forEach(btn => {
                btn.addEventListener('click', (e) => {
                    e.preventDefault();
                    openCta();
                });
            });
            closeCtaBtn?.addEventListener('click', closeCta);
            ctaModal?.addEventListener('click', (e) => {
                if (e.target === ctaModal) closeCta();
            });

            // CTA form submit handler
            const ctaForm = document.getElementById('ctaForm');
            const ctaFormMsg = document.getElementById('ctaFormMsg');
            ctaForm?.addEventListener('submit', (e) => {
                e.preventDefault();
                if (!ctaFormMsg) return;
                const data = new FormData(ctaForm);
                const required = ['firstName','lastName','email','phone'];
                const missing = required.filter(k => !(data.get(k) || '').toString().trim());
                if (missing.length) {
                    ctaFormMsg.textContent = 'Pros√≠me, vypl≈àte v≈°echna povinn√° pole (jm√©no, p≈ô√≠jmen√≠, e‚Äëmail, telefon).';
                    ctaFormMsg.className = 'text-sm text-red-600';
                    return;
                }
                // Simulated submit ‚Äì here you can integrate your backend endpoint
                ctaFormMsg.textContent = 'Dƒõkujeme! Ozveme se v√°m co nejd≈ô√≠ve.';
                ctaFormMsg.className = 'text-sm text-green-600';
                // Optionally clear fields
                ctaForm.reset();
                // Auto-close after short delay
                setTimeout(() => closeCta(), 1200);
            });
            
            // Auto-open modal on load so odemknut√≠ probƒõhne p≈ô√≠mo v popupu
            openModal();
        })();
    </script>
</body>
</html>
